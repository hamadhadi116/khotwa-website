<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>التقويم – Khotwa</title>
<meta name="description" content="تقويم فعاليات مجلس طلاب خطوة في جامعة لا تروب: ورش، بطولات، وماراثون داخل الحرم.">
<link rel="canonical" href="https://khotwastudentcouncil.com/calendar.html"/>
<meta name="robots" content="index,follow"/>
<meta name="color-scheme" content="light dark"/>

<!-- OG/Twitter -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="Khotwa Student Council">
<meta property="og:title" content="التقويم – Khotwa">
<meta property="og:description" content="جدول الفعاليات القادمة لطلاب خطوة.">
<meta property="og:url" content="https://khotwastudentcouncil.com/calendar.html">
<meta property="og:image" content="https://g.top4top.io/p_3516rfttb1.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="التقويم – Khotwa">
<meta name="twitter:description" content="جدول الفعاليات القادمة لطلاب خطوة.">
<meta name="twitter:image" content="https://g.top4top.io/p_3516rfttb1.jpg">

<!-- JSON-LD (ثابت مبدئيًا) -->
<script type="application/ld+json">
{ "@context":"https://schema.org", "@graph":[] }
</script>

<style>
  :root{
    --primary:#1e40af;--primary-600:#1d4ed8;
    --ring:#e5e7eb;--card:#f8fafc;
    --text:#0f172a;--muted:#6b7280;
    --shadow:0 10px 26px rgba(2,6,23,.08)
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:"Segoe UI",system-ui,-apple-system,Tahoma,Arial,sans-serif;color:var(--text);background:#fff}
  a{color:inherit;text-decoration:none} a:visited{color:inherit}
  .container{width:min(1120px,92%);margin-inline:auto}

  :where(a,button,[role="button"],input,select,textarea):focus-visible{
    outline:3px solid #2563eb;outline-offset:3px;border-radius:8px
  }
  .skip-link{
    position:absolute;inset-inline-start:1rem;inset-block-start:-100px;
    background:#fff;color:#000;padding:.6rem .9rem;border-radius:.5rem;
    box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000
  }
  .skip-link:focus{inset-block-start:1rem}

  .navbar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--ring);z-index:40}
  .nav-inner{display:flex;justify-content:space-between;align-items:center;padding:.8rem 0;gap:.8rem;position:relative}
  .brand{display:flex;align-items:center;gap:.8rem;font-weight:700}
  .brand .logo{width:40px;height:40px;object-fit:cover;border-radius:8px}
  .nav-links{display:flex;gap:1rem;align-items:center}
  .nav-links a{padding:.5rem .75rem;border-radius:10px}
  .nav-links a:hover{background:var(--card)}
  .nav-links a[aria-current="page"]{background:var(--card)}
  .lang-toggle{padding:.45rem .75rem;border:1px solid var(--ring);background:#fff;border-radius:10px;cursor:pointer}
  .menu-toggle{display:none;align-items:center;gap:.5rem;padding:.5rem .7rem;border:1px solid var(--ring);background:#fff;border-radius:10px;cursor:pointer}
  .menu-toggle svg{width:20px;height:20px}
  @media (max-width:900px){
    .menu-toggle{display:inline-flex}
    .nav-links{
      position:absolute; inset-inline:0; top:calc(100% + 8px);
      background:#fff; border:1px solid var(--ring); border-radius:12px;
      display:grid; gap:.2rem; padding:.4rem;
      box-shadow:0 12px 30px rgba(2,6,23,.10);
      max-height:0; overflow:hidden; opacity:0; transform:scale(.98);
      transition:max-height .2s ease, opacity .2s ease, transform .2s ease, padding .2s ease;
    }
    .nav-links[data-open="true"]{max-height:80vh;opacity:1;transform:scale(1);padding:.6rem}
    .nav-links a,.lang-toggle{padding:.7rem .9rem}
  }

  section{padding:2rem 0}
  .section-head{display:flex;align-items:end;justify-content:space-between;gap:1rem;margin-bottom:1.2rem}
  .section-head h1{margin:0;font-size:clamp(1.6rem,2.6vw + 1rem,2.2rem)}
  .muted{color:var(--muted)}

  .card{background:#fff;border:1px solid var(--ring);border-radius:16px;padding:1rem;box-shadow:var(--shadow)}
  .events-list{margin:0;padding-right:1rem;line-height:1.9}
  .events-list li{margin:.2rem 0}
  .events-list time{font-variant-numeric:tabular-nums}

  footer{border-top:1px solid var(--ring);background:#fff}
  .foot{display:flex;justify-content:space-between;gap:1rem;align-items:center;padding:1.2rem 0}

  @media (prefers-color-scheme: dark){
    :root{--card:#0b1220; --ring:#1f2937; --text:#e5e7eb; --muted:#9ca3af; --shadow:0 10px 26px rgba(2,6,23,.3)}
    body{ background:#0a0f1a; }
    .navbar, footer{ background:#0c1220; border-color:var(--ring); }
    .card{ background:#0f172a; border-color:var(--ring); }
    .nav-links a:hover, .nav-links a[aria-current="page"]{ background:#0f172a; }
    .lang-toggle,.menu-toggle{ background:transparent; color:var(--text); }
  }
  @media (prefers-reduced-motion: reduce){
    *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
  }
</style>
</head>
<body>
<a class="skip-link" href="#main">تخطَّ إلى المحتوى</a>

<nav class="navbar" aria-label="الشريط العلوي">
  <div class="container nav-inner">
    <a class="brand" href="/index.html" aria-label="العودة للرئيسية">
      <img src="https://g.top4top.io/p_3516rfttb1.jpg" class="logo" alt="شعار مجلس طلاب خطوة" width="80" height="80" decoding="async" loading="lazy">
      <span data-lang="ar">مجلس طلاب خطوة</span>
      <span data-lang="en" hidden>Khotwa Student Council</span>
    </a>

    <button id="menu-toggle" class="menu-toggle" type="button"
            aria-controls="primary-nav" aria-expanded="false" aria-label="فتح وإغلاق القائمة">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
      القائمة
    </button>

    <div class="nav-links" id="primary-nav" data-open="false">
      <a href="/about.html"><span data-lang="ar">من نحن</span><span data-lang="en" hidden>About</span></a>
      <a href="/news.html"><span data-lang="ar">الأخبار</span><span data-lang="en" hidden>News</span></a>
      <a href="/events.html"><span data-lang="ar">الفعاليات</span><span data-lang="en" hidden>Events</span></a>
      <a href="/calendar.html" aria-current="page"><span data-lang="ar">التقويم</span><span data-lang="en" hidden>Calendar</span></a>
      <a href="/resources.html"><span data-lang="ar">الموارد</span><span data-lang="en" hidden>Resources</span></a>
      <a href="/contact.html"><span data-lang="ar">تواصل</span><span data-lang="en" hidden>Contact</span></a>
      <button id="lang-toggle" class="lang-toggle" type="button">English</button>
    </div>
  </div>
</nav>

<main class="container" id="main">
  <section>
    <div class="section-head">
      <h1 data-lang="ar">تقويم الفعاليات</h1>
      <h1 data-lang="en" hidden>Events Calendar</h1>
    </div>
    <p class="muted" data-lang="ar">جدول الفعاليات القادمة.</p>
    <p class="muted" data-lang="en" hidden>Schedule of upcoming events.</p>

    <div class="card">
      <ul class="events-list">
        <!-- سيتم ملؤها تلقائيًا من data/events.json -->
      </ul>
    </div>
  </section>
</main>

<footer aria-label="تذييل الموقع">
  <div class="container foot">
    <div class="muted">© <span id="year"></span> Khotwa Student Council</div>
    <a href="https://www.instagram.com/khotwa.sc/" target="_blank" rel="noopener">Instagram</a>
  </div>
</footer>

<script>
  // سنة الحقوق
  document.getElementById('year').textContent = new Date().getFullYear();

  // منيو الموبايل + وصولية
  const menuBtn = document.getElementById('menu-toggle');
  const primaryNav = document.getElementById('primary-nav');
  function setMenu(open){
    primaryNav.setAttribute('data-open', String(open));
    menuBtn.setAttribute('aria-expanded', String(open));
    if(open){ primaryNav.querySelector('a,button')?.focus(); }
  }
  menuBtn.addEventListener('click',()=> setMenu(primaryNav.getAttribute('data-open')!=='true'));
  matchMedia('(min-width:901px)').addEventListener('change', e=>{ if(e.matches) setMenu(false); });
  document.addEventListener('click', (e)=>{
    const open = primaryNav.getAttribute('data-open')==='true';
    if(open && !primaryNav.contains(e.target) && !menuBtn.contains(e.target)) setMenu(false);
  });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') setMenu(false); });

  // اللغة + حفظ التفضيل
  const toggleBtn = document.getElementById('lang-toggle');
  let isEn = localStorage.getItem('khotwa_lang') === 'en';
  function setLang(en){
    document.querySelectorAll('[data-lang="ar"]').forEach(el => el.hidden = en);
    document.querySelectorAll('[data-lang="en"]').forEach(el => el.hidden = !en);
    document.documentElement.lang = en ? 'en' : 'ar';
    document.documentElement.dir  = en ? 'ltr' : 'rtl';
    toggleBtn.textContent = en ? 'العربية' : 'English';
    localStorage.setItem('khotwa_lang', en ? 'en' : 'ar');
    // إعادة رسم التواريخ
    loadEvents();
  }
  toggleBtn.addEventListener('click',()=> setLang(!isEn));
  setLang(isEn);

  // تحميل الفعاليات من data/events.json
  async function loadEvents(){
    try{
      const res = await fetch('data/events.json', {cache:'no-cache'});
      const data = await res.json();
      const list = document.querySelector('.events-list');
      list.innerHTML = '';

      if(!Array.isArray(data) || data.length===0){
        list.innerHTML = '<li class="muted">لا توجد فعاليات حالياً.</li>';
        return;
      }

      const lang = document.documentElement.lang || 'ar';
      const monthFmt = new Intl.DateTimeFormat(lang==='en'?'en-AU':'ar-EG',{month:'long'});
      const dateFmt  = new Intl.DateTimeFormat(lang==='en'?'en-AU':'ar-EG',{year:'numeric',month:'2-digit',day:'2-digit'});

      data.sort((a,b)=> new Date(a.startDate) - new Date(b.startDate));

      data.forEach(ev=>{
        const d = new Date(ev.startDate);
        const li = document.createElement('li');
        li.innerHTML = `
          <strong data-lang="ar" ${lang==='en'?'hidden':''}>${monthFmt.format(d)}</strong>
          <strong data-lang="en" ${lang==='en'?'':'hidden'}>${new Intl.DateTimeFormat('en-AU',{month:'long'}).format(d)}</strong> —
          <span data-lang="ar" ${lang==='en'?'hidden':''}>${ev.title?.ar||''} – </span>
          <span data-lang="en" ${lang==='en'?'':'hidden'}>${ev.title?.en||''} – </span>
          <time datetime="${ev.startDate}">${dateFmt.format(d)}</time>
          ${ev.location ? `<span> · ${ev.location}</span>` : ''}
        `;
        list.appendChild(li);
      });
    }catch(err){
      console.error('فشل تحميل الفعاليات:', err);
    }
  }
  loadEvents();
  <script src="/assets/cms-boot.js" defer></script>
</body>
</html>
