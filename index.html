<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>الرئيسية – مجلس طلاب خطوة</title>
  
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/design-system.css">
  <link rel="stylesheet" href="/assets/khotwa-redesign.css">
  <link rel="stylesheet" href="/assets/enhanced-navbar.css">

  <script>
    window.KHOTWA_CONFIG = {
      API_BASE: 'https://khotwabknd-gj8oeubw.manus.space/api/trpc'
    };
  </script>

  <style>
    :root { --primary: #1e40af; --ring: #e2e8f0; }
    .hero {
      padding: 8rem 0;
      background: radial-gradient(circle at top right, #f8fafc, #e2e8f0);
      text-align: center;
      border-bottom: 1px solid var(--ring);
      position: relative;
      overflow: hidden;
    }
    .hero h1 { font-size: clamp(2.5rem, 5vw, 4rem); color: var(--primary); margin-bottom: 1.5rem; font-weight: 800; }
    .hero p { font-size: 1.25rem; color: #64748b; max-width: 800px; margin: 0 auto 2.5rem; line-height: 1.8; }
    .cta-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
    .btn-main { padding: 1rem 2.5rem; border-radius: 14px; text-decoration: none; font-weight: 700; transition: 0.3s; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-secondary { background: white; color: var(--primary); border: 2px solid var(--primary); }
    .stats-section { padding: 4rem 0; background: white; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; text-align: center; }
    .stat-item h2 { font-size: 3rem; color: var(--primary); font-weight: 800; }
    .service-card { background: white; padding: 2.5rem; border-radius: 20px; text-align: center; border: 1px solid #f1f5f9; transition: 0.3s; }
    .service-card:hover { transform: translateY(-10px); }
    [hidden] { display: none !important; }
  </style>
</head>
<body>

  <nav class="navbar">
    <div class="container nav-inner">
      <a class="brand" href="/index.html">
        <img src="/assets/apple-touch-icon.png" class="logo" alt="Logo">
        <span data-lang="ar">مجلس طلاب خطوة</span>
        <span data-lang="en" hidden>Khotwa Student Council</span>
      </a>
      <div class="nav-links" id="primary-nav">
        <a href="/index.html" class="active"><span data-lang="ar">الرئيسية</span><span data-lang="en" hidden>Home</span></a>
        <a href="/news.html"><span data-lang="ar">الأخبار</span><span data-lang="en" hidden>News</span></a>
        <a href="/events.html"><span data-lang="ar">الفعاليات</span><span data-lang="en" hidden>Events</span></a>
        <a href="/calendar.html"><span data-lang="ar">التقويم</span><span data-lang="en" hidden>Calendar</span></a>
        <button class="lang-toggle" id="lang-toggle"><span data-lang="ar">English</span><span data-lang="en" hidden>عربي</span></button>
      </div>
    </div>
  </nav>

  <header class="hero">
    <div class="container">
      <h1 data-lang="ar">أهلاً بك في مجلس خطوة</h1>
      <h1 data-lang="en" hidden>Welcome to Khotwa Council</h1>
      <p data-lang="ar">البيت الجامعي لطلاب برنامج خطوة في ملبورن. نجمع بين العلم، المبادرة، والروح الجماعية لتطوير مستقبلنا.</p>
      <div class="cta-buttons">
        <a href="/events.html" class="btn-main btn-primary"><span data-lang="ar">استكشف الفعاليات</span></a>
        <a href="/about.html" class="btn-main btn-secondary"><span data-lang="ar">تعرف علينا</span></a>
      </div>
    </div>
  </header>

  <section class="stats-section">
    <div class="container stats-grid">
      <div class="stat-item"><h2 id="count1">+0</h2><p data-lang="ar">فعالية سنوياً</p></div>
      <div class="stat-item"><h2 id="count2">+0</h2><p data-lang="ar">طالب مستفيد</p></div>
      <div class="stat-item"><h2 id="count3">0%</h2><p data-lang="ar">دعم طلابي</p></div>
    </div>
  </section>

  <script src="/assets/push-notifications.js"></script>
  <script src="/assets/comments-and-registration.js"></script>

  <script>
    // وظيفة العدادات المتحركة
    function animateValue(id, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            const currentVal = Math.floor(progress * (end - start) + start);
            const element = document.getElementById(id);
            element.innerHTML = (id === 'count3' ? currentVal + "%" : "+" + currentVal);
            if (progress < 1) window.requestAnimationFrame(step);
        };
        window.requestAnimationFrame(step);
    }

    // لغة الواجهة والتحميل
    document.addEventListener('DOMContentLoaded', () => {
      animateValue("count1", 0, 50, 2000);
      animateValue("count2", 0, 200, 2000);
      animateValue("count3", 0, 100, 2000);

      // تفعيل الـ Service Worker للمميزات المتقدمة (sw.js)
      if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/sw.js').catch(err => console.log('SW error:', err));
      }
    });

    // تبديل اللغة
    document.getElementById('lang-toggle').addEventListener('click', () => {
      const currentLang = document.documentElement.lang === 'ar' ? 'en' : 'ar';
      document.documentElement.lang = currentLang;
      document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
      document.querySelectorAll('[data-lang]').forEach(el => el.hidden = el.getAttribute('data-lang') !== currentLang);
    });
  </script>
</body>
</html>
