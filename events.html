<!doctype html>
<html lang="ar" dir="rtl" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>فعاليات مجلس طلاب خطوة – La Trobe</title>
  <meta name="description" content="فعاليات مجلس طلاب خطوة في ملبورن: ورش، بطولات، ملتقيات. سجل الآن واطّلع على التقويم."/>
  <meta name="theme-color" content="#1e40af"/>
  <style>
    :root{--primary:#1e40af;--primary-600:#1d4ed8;--bg:#fff;--text:#0f172a;--muted:#6b7280;--ring:#e5e7eb;--card:#f8fafc;--accent-red:#d41c0f;--accent-green:#00703c}
    *{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:"Segoe UI",system-ui,-apple-system,Tahoma,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    a{color:inherit;text-decoration:none}img{max-width:100%;display:block}
    .container{width:min(1120px,92%);margin-inline:auto}
    /* Navbar */
    .navbar{position:sticky;top:0;z-index:40;background:rgba(255,255,255,.85);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--ring)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:.8rem 0}
    .brand{display:flex;align-items:center;gap:.8rem;font-weight:700}
    .flag{width:18px;height:18px;border-radius:4px;overflow:hidden;display:inline-grid;grid-template-columns:1fr 1fr 1fr;border:2px solid #000;box-shadow:0 0 0 1px #000 inset}
    .flag .r{background:var(--accent-red)}.flag .g{background:var(--accent-green)}.flag .b{background:#000}
    .nav-links{display:flex;gap:1rem;align-items:center}
    .nav-links a{padding:.5rem .75rem;border-radius:10px;font-weight:600}
    .nav-links a:hover{background:var(--card)}.nav-cta{padding:.55rem .9rem;border-radius:12px;background:var(--primary);color:#fff!important;box-shadow:0 4px 18px rgba(29,78,216,.18)}
    .nav-cta:hover{background:var(--primary-600)}.menu-toggle{display:none;border:1px solid var(--ring);padding:.5rem .7rem;border-radius:10px;background:#fff}
    @media(max-width:860px){.menu-toggle{display:inline-flex}.nav-links{display:none;position:absolute;right:4%;left:4%;top:64px;flex-direction:column;padding:.75rem;background:#fff;border:1px solid var(--ring);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.06)}.nav-links.open{display:flex}.nav-links a{width:100%}}
    /* Page head */
    header.hero{background:linear-gradient(180deg,#ffffff 0%,#f5f7ff 100%);border-bottom:1px solid var(--ring)}
    .hero-inner{padding:2.6rem 0;display:grid;grid-template-columns:1fr .9fr;gap:2rem;align-items:center}
    .hero h1{margin:0 0 .3rem;font-size:clamp(1.5rem,2vw+1rem,2.2rem)}.muted{color:var(--muted)}
    @media(max-width:980px){.hero-inner{grid-template-columns:1fr}}
    /* Filters & grid */
    section{padding:2rem 0}.toolbar{display:flex;gap:.6rem;flex-wrap:wrap;align-items:center;margin:.6rem 0 1rem}
    .input{border:1px solid var(--ring);border-radius:12px;padding:.6rem .8rem}.select{border:1px solid var(--ring);border-radius:12px;padding:.55rem .8rem;background:#fff}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.7rem .95rem;border-radius:12px;border:1px solid var(--ring);cursor:pointer;background:#fff}
    .btn-primary{background:var(--primary);border-color:transparent;color:#fff;box-shadow:0 10px 22px rgba(29,78,216,.2)}.btn-primary:hover{background:var(--primary-600)}
    .grid{display:grid;gap:1rem}.grid-3{grid-template-columns:repeat(3,1fr)}@media(max-width:980px){.grid-3{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--ring);border-radius:16px;padding:1rem;display:grid;gap:.5rem}
    .chip{display:inline-block;font-size:.78rem;padding:.25rem .55rem;border-radius:999px;background:var(--card);border:1px solid var(--ring)}
    .bar{height:8px;background:var(--card);border-radius:999px;overflow:hidden}
    .bar>span{display:block;height:100%;background:linear-gradient(90deg,var(--primary),var(--primary-600))}
    /* Calendar */
    .calendar{background:#fff;border:1px solid var(--ring);border-radius:16px;padding:1rem}
    .cal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.4rem}
    .day{padding:.7rem;border:1px dashed var(--ring);border-radius:10px;min-height:84px;display:flex;flex-direction:column;gap:.3rem}
    .day .d{font-weight:700}.day .dot{width:8px;height:8px;border-radius:999px;background:var(--primary)}
    /* Footer */
    footer{border-top:1px solid var(--ring);background:#fff}.foot{display:grid;grid-template-columns:1.2fr 1fr;gap:1rem;padding:1.4rem 0}
    @media(max-width:860px){.foot{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar" aria-label="الشريط العلوي">
    <div class="container nav-inner">
      <a class="brand" href="/" aria-label="العودة للرئيسية">
        <span class="flag" aria-hidden="true"><span class="r"></span><span class="g"></span><span class="b"></span></span>
        <span>مجلس طلاب خطوة – La Trobe</span>
      </a>
      <button id="menuBtn" class="menu-toggle" aria-expanded="false" aria-controls="primary-menu">القائمة</button>
      <div id="primary-menu" class="nav-links" role="menubar">
        <a href="/index.html#about" role="menuitem">من نحن</a>
        <a href="#" aria-current="page" role="menuitem">الفعاليات</a>
        <a href="/contact.html" role="menuitem">تواصل</a>
        <a href="/index.html#join" class="nav-cta" role="menuitem">انضم للمجلس</a>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="hero">
    <div class="container hero-inner">
      <div>
        <h1>الفعاليات القادمة</h1>
        <p class="muted">هنا تلاقي كل ورش العمل، البطولات، والملتقيات. تقدر تسجّل مباشرة، وتحمّل الموعد كملف تقويم.</p>
        <div class="toolbar">
          <input id="q" class="input" type="search" placeholder="ابحث باسم الفعالية…"/>
          <select id="cat" class="select" aria-label="تصنيف الفعاليات">
            <option value="">كل التصنيفات</option>
            <option value="academic">أكاديمي</option>
            <option value="sports">رياضي</option>
            <option value="social">مجتمعي</option>
          </select>
          <button id="reset" class="btn" type="button">إعادة تعيين</button>
        </div>
      </div>
      <aside class="calendar" aria-label="تقويم الشهر">
        <div class="cal-head">
          <strong id="cal-title">تقويم</strong>
          <div>
            <button class="btn" id="prevM" type="button">الشهر السابق</button>
            <button class="btn" id="nextM" type="button">الشهر التالي</button>
          </div>
        </div>
        <div class="cal-grid" id="cal-grid" aria-live="polite"></div>
      </aside>
    </div>
  </header>

  <main>
    <section>
      <div class="container">
        <div class="grid grid-3" id="events"></div>
      </div>
    </section>
  </main>

  <footer aria-label="تذييل الموقع">
    <div class="container foot">
      <div>
        <strong>مجلس طلاب خطوة – La Trobe</strong>
        <p class="muted" style="margin:.4rem 0 0">بريد رسمي: <a href="mailto:khotwaaustralia@gmail.com">khotwaaustralia@gmail.com</a></p>
        <div style="margin-top:.6rem">
          <a href="https://www.instagram.com/khotwa.sc/" target="_blank" rel="noopener">Instagram</a>
        </div>
      </div>
      <div class="muted" style="align-self:end;text-align:end">© <span id="year"></span> Khotwa Student Council</div>
    </div>
  </footer>

  <script>
    // Navbar toggle
    const btn=document.getElementById('menuBtn');
    const menu=document.getElementById('primary-menu');
    btn?.addEventListener('click',()=>{const o=menu.classList.toggle('open');btn.setAttribute('aria-expanded',String(o));});

    // Footer year
    document.getElementById('year').textContent=new Date().getFullYear();

    // Sample events (بدّلها من API/JSON لاحقًا)
    const DATA=[
      {id:1,title:'ورشة تخصصات خطوة',cat:'academic',date:'2025-08-25T16:00:00+10:00',place:'La Trobe – L5',desc:'IT، Cybersecurity، Bioscience، Business',spots:45},
      {id:2,title:'بطولة البادل',cat:'sports',date:'2025-08-20T17:00:00+10:00',place:'Reservoir VIC',desc:'فرق من 2 لاعبين، جوائز',spots:20},
      {id:3,title:'ماراثون الحرم الجامعي',cat:'sports',date:'2025-09-05T09:00:00+10:00',place:'La Trobe Campus',desc:'مسارات 1K و2.5K و10K',spots:120},
      {id:4,title:'ملتقى تعريفي بالمجلس',cat:'social',date:'2025-08-28T18:00:00+10:00',place:'Sylvia Walton – R106',desc:'خطة الفصل، وأسئلة وأجوبة',spots:80}
    ];

    const eventsBox=document.getElementById('events');
    const q=document.getElementById('q');
    const cat=document.getElementById('cat');
    const resetBtn=document.getElementById('reset');

    function fmt(d){
      return new Intl.DateTimeFormat('ar', {dateStyle:'full', timeStyle:'short'}).format(new Date(d));
    }
    function ics(ev){
      const dt=new Date(ev.date);
      const pad=n=>String(n).padStart(2,'0');
      const toUTC=(d)=>`${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;
      const start=toUTC(dt); const end=toUTC(new Date(dt.getTime()+90*60000));
      const body=`BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:${ev.title}\nDTSTART:${start}\nDTEND:${end}\nLOCATION:${ev.place}\nDESCRIPTION:${ev.desc}\nEND:VEVENT\nEND:VCALENDAR`;
      return 'data:text/calendar;charset=utf8,'+encodeURIComponent(body);
    }
    function card(ev){
      return `<article class="card" data-cat="${ev.cat}">
        <span class="chip">${ev.cat==='academic'?'أكاديمي':ev.cat==='sports'?'رياضي':'مجتمعي'}</span>
        <h3>${ev.title}</h3>
        <div class="muted">${fmt(ev.date)} — ${ev.place}</div>
        <p class="muted">${ev.desc}</p>
        <div class="bar" aria-hidden="true"><span style="width:${Math.min(100, ev.spots)}%"></span></div>
        <div style="display:flex;gap:.6rem;flex-wrap:wrap">
          <a class="btn btn-primary" href="#" onclick="alert('سيتم فتح نموذج التسجيل قريبًا');return false;">سجّل الآن</a>
          <a class="btn" href="${ics(ev)}" download>أضف للتقويم (.ics)</a>
        </div>
      </article>`;
    }
    function render(){
      const term=q.value.trim(); const c=cat.value;
      const list=DATA.filter(ev=>{
        const okCat=c?ev.cat===c:true;
        const okTerm=term? (ev.title.includes(term)||ev.desc.includes(term)||fmt(ev.date).includes(term)):true;
        return okCat && okTerm;
      }).sort((a,b)=> new Date(a.date)-new Date(b.date));
      eventsBox.innerHTML=list.map(card).join('');
    }
    q.addEventListener('input',render); cat.addEventListener('change',render); resetBtn.addEventListener('click',()=>{q.value='';cat.value='';render();});
    render();

    // Simple calendar for current month
    const grid=document.getElementById('cal-grid');
    const title=document.getElementById('cal-title');
    let ref=new Date();
    function buildCal(){
      const y=ref.getFullYear(), m=ref.getMonth();
      title.textContent=new Intl.DateTimeFormat('ar',{month:'long',year:'numeric'}).format(ref);
      grid.innerHTML='';
      const first=new Date(y,m,1); const startDay=(first.getDay()+6)%7; // make Monday=0
      const days=new Date(y,m+1,0).getDate();
      for(let i=0;i<startDay;i++){grid.appendChild(document.createElement('div'));}
      for(let d=1; d<=days; d++){
        const box=document.createElement('div'); box.className='day';
        const num=document.createElement('div'); num.className='d'; num.textContent=d; box.appendChild(num);
        const dateISO=new Date(y,m,d).toISOString().slice(0,10);
        DATA.filter(e=>e.date.startsWith(dateISO)).forEach(()=>{
          const dot=document.createElement('span'); dot.className='dot'; box.appendChild(dot);
        });
        grid.appendChild(box);
      }
    }
    document.getElementById('prevM').onclick=()=>{ref.setMonth(ref.getMonth()-1);buildCal();};
    document.getElementById('nextM').onclick=()=>{ref.setMonth(ref.getMonth()+1);buildCal();};
    buildCal();
  </script>
</body>
</html>
