<!DOCTYPE html>

<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª â€“ Khotwa</title>
  <meta name="keywords" content="ÙØ¹Ø§Ù„ÙŠØ§Øª Ø®Ø·ÙˆØ©, Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø¬Ù„Ø³, ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø§Ø¨, Ø¬Ø§Ù…Ø¹Ø© Ù„Ø§ ØªØ±ÙˆØ¨, Ù…Ù„Ø¨ÙˆØ±Ù†">
  <meta name="description" content="ØªØ§Ø¨Ø¹ Ø£Ø­Ø¯Ø« ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ£Ù†Ø´Ø·Ø© Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù†. Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ÙˆØ´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©.">
  <link rel="canonical" href="https://khotwastudentcouncil.com/events.html"/>
  <meta name="robots" content="index,follow"/>
  <meta name="color-scheme" content="light dark"/>
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0a0f1a" media="(prefers-color-scheme: dark)">

  <!-- OG/Twitter -->
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="Khotwa Student Council"/>
  <meta property="og:title" content="Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª â€“ Khotwa"/>
  <meta property="og:description" content="ØªØ§Ø¨Ø¹ Ø£Ø­Ø¯Ø« ÙØ¹Ø§Ù„ÙŠØ§Øª Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù†."/>
  <meta property="og:url" content="https://khotwastudentcouncil.com/events.html"/>
  <meta property="og:image" content="/assets/apple-touch-icon.png"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"EventSeries",
    "name":"Khotwa Events",
    "url":"https://khotwastudentcouncil.com/events.html",
    "inLanguage":"ar",
    "organizer":{
      "@type":"Organization",
      "name":"Khotwa Student Council",
      "url":"https://khotwastudentcouncil.com/"
    }
  }
  </script>

  <style>
    :root {
      --primary:#1e40af; --primary-600:#1d4ed8; --text:#0f172a; --muted:#64748b;
      --surface:#ffffff; --card:#f8fafc; --ring:#e6eaf2; --r-md:14px; --r-lg:16px; --r-xl:22px;
      --sh-sm:0 2px 10px rgba(2,6,23,.06); --sh-md:0 10px 26px rgba(2,6,23,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Segoe UI",system-ui,-apple-system,Tahoma,Arial,sans-serif;
      color:var(--text);
      background:var(--surface);
      line-height:1.6;
    }
    a{color:inherit;text-decoration:none}
    .container{width:min(1120px,92%);margin-inline:auto}

    /* ÙˆØµÙˆÙ„ÙŠØ© */
    :where(a,button,input,select,textarea,[role="button"]):focus-visible{
      outline:3px solid #2563eb;
      outline-offset:3px;
      border-radius:8px;
    }
    .skip-link{
      position:absolute;
      inset-inline-start:1rem;
      inset-block-start:-100px;
      background:#fff;
      color:#000;
      padding:.6rem .9rem;
      border-radius:10px;
      box-shadow:var(--sh-sm);
      z-index:1000;
    }
    .skip-link:focus{inset-block-start:1rem}

    /* NAV */
    .navbar{
      position:sticky;
      top:0;
      z-index:40;
      background:color-mix(in oklab,#ffffff 80%,transparent);
      border-bottom:1px solid var(--ring);
      backdrop-filter:blur(8px);
    }
    .nav-inner{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:.8rem 0;
      gap:.8rem;
      position:relative;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:.8rem;
      font-weight:800;
    }
    .brand .logo{
      width:40px;
      height:40px;
      object-fit:cover;
      border-radius:12px;
      box-shadow:0 2px 6px rgba(0,0,0,.06);
    }
    .nav-links{
      display:flex;
      gap:.25rem;
      align-items:center;
    }
    .nav-links a{
      padding:.5rem .75rem;
      border-radius:var(--r-md);
    }
    .nav-links a:hover{background:var(--card)}
    .nav-links a[aria-current="page"]{background:var(--card)}
    .lang-toggle,.menu-toggle{
      padding:.45rem .75rem;
      border:1px solid var(--ring);
      background:#fff;
      border-radius:var(--r-md);
      cursor:pointer;
      font-weight:600;
    }
    .menu-toggle{
      display:none;
      align-items:center;
      gap:.5rem;
    }
    .menu-toggle svg{width:20px;height:20px}

    @media (max-width:900px){
      .menu-toggle{display:inline-flex}
      .nav-links{
        position:absolute;
        inset-inline:0;
        top:calc(100% + 8px);
        background:#fff;
        border:1px solid var(--ring);
        border-radius:var(--r-xl);
        display:grid;
        gap:.2rem;
        padding:.4rem;
        box-shadow:0 20px 48px rgba(2,6,23,.1);
        max-height:80vh;
        overflow:auto;
        opacity:1;
        transform:scale(1);
        transition:opacity .2s,transform .2s,padding .2s;
      }
      .nav-links[aria-hidden="true"]{
        transform:scale(.98);
        opacity:0;
      }
      .nav-links a,.lang-toggle{padding:.7rem .9rem}
    }

    section{padding:2rem 0}
    .section-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:1rem;
      margin-bottom:1.2rem;
    }
    .section-head h1{
      margin:0;
      font-size:clamp(1.6rem,2.6vw + 1rem,2.2rem);
    }
    .muted{color:var(--muted)}

    /* Cards */
    .grid{display:grid;gap:1rem}
    .grid-3{grid-template-columns:repeat(3,1fr)}
    @media(max-width:980px){.grid-3{grid-template-columns:1fr}}
    .event-card{
      background:#fff;
      border:1px solid var(--ring);
      border-radius:16px;
      overflow:hidden;
      box-shadow:var(--sh-sm);
      display:flex;
      flex-direction:column;
    }
    .event-card img{
      width:100%;
      height:auto;
      aspect-ratio:16/9;
      object-fit:cover;
      background:#f3f4f6;
    }
    .event-card .body{padding:1rem}
    .event-card h3{
      margin:0 0 .4rem;
      font-size:1.05rem;
    }
    .meta{
      display:flex;
      gap:.6rem;
      align-items:center;
      color:var(--muted);
      font-size:.9rem;
      margin-bottom:.6rem;
    }
    .event-card:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 34px rgba(2,6,23,.10);
      transition:.18s;
    }

    /* Skeleton */
    .skeleton{
      border:1px solid var(--ring);
      border-radius:16px;
      overflow:hidden;
      background:#fff;
    }
    .sk-img{
      aspect-ratio:16/9;
      background:linear-gradient(90deg,#f1f5f9 25%,#e2e8f0 37%,#f1f5f9 63%);
      background-size:400% 100%;
      animation:sk 1.2s infinite;
    }
    .sk-body{padding:1rem}
    .sk-line{
      height:12px;
      background:#e2e8f0;
      border-radius:8px;
      margin:.4rem 0;
    }
    .sk-line.w60{width:60%}
    .sk-line.w80{width:80%}
    .sk-line.w40{width:40%}
    @keyframes sk{
      0%{background-position:100% 0}
      100%{background-position:-100% 0}
    }

    /* Footer */
    footer{
      border-top:1px solid var(--ring);
      background:#fff;
    }
    .foot{
      display:flex;
      justify-content:space-between;
      gap:1rem;
      align-items:center;
      padding:1.2rem 0;
    }

    /* Dark */
    @media (prefers-color-scheme: dark){
      :root{
        --surface:#0a0f1a;
        --card:#0b1220;
        --ring:#1f2937;
        --text:#e5e7eb;
        --muted:#9ca3af;
      }
      .navbar,footer{
        background:#0c1220;
        border-color:var(--ring);
      }
      .event-card,.skeleton{
        background:#0f172a;
        border-color:var(--ring);
      }
      .nav-links a:hover,
      .nav-links a[aria-current="page"]{
        background:#0f172a;
      }
      .lang-toggle,.menu-toggle{
        background:transparent;
        color:var(--text);
      }
      .sk-img{
        background:linear-gradient(90deg,#111827 25%,#1f2937 37%,#111827 63%);
      }
      .sk-line{background:#1f2937}
    }

    @media (prefers-reduced-motion: reduce){
      *{
        animation-duration:.01ms !important;
        animation-iteration-count:1 !important;
        transition-duration:.01ms !important;
        scroll-behavior:auto !important;
      }
    }
  </style>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HCS6PYK04X"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-HCS6PYK04X');</script>
  <script src="/assets/khotwa-api.js?v=1766975537"></script>
  <link rel="stylesheet" href="/assets/design-system.css">
  <link rel="stylesheet" href="/assets/khotwa-redesign.css">
    <link rel="stylesheet" href="assets/enhanced-navbar.css">
</head>
<body>
  <a href="#main" class="skip-link">ØªØ®Ø·ÙÙ‘ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>

  <!-- NAVBAR -->
  <link rel="stylesheet" href="/assets/feedback.css">
  <link rel="alternate" type="application/rss+xml" title="Ø£Ø®Ø¨Ø§Ø± Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ©" href="/feed.xml">
  <link rel="stylesheet" href="/assets/comments-and-registration.css"/>
  <link rel="stylesheet" href="/assets/khotwa-redesign.css">
</head>
<body>
  <!-- Skip link (Ù„ØºØªÙŠÙ†) -->
  <a class="skip-link" href="#main" data-lang="ar">ØªØ®Ø·Ù‘Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
  <a class="skip-link" href="#main" data-lang="en" hidden aria-hidden="true">Skip to content</a>

  <!-- Navbar -->
<!-- Navbar -->
  <nav class="navbar" aria-label="Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ">
    <div class="container nav-inner">
      <a class="brand" href="/index.html" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
        <img src="/assets/apple-touch-icon.png" class="logo" alt="Ø´Ø¹Ø§Ø± Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ©" width="40" height="40" decoding="async" loading="lazy">
        <span data-lang="ar">Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ©</span>
        <span data-lang="en" hidden aria-hidden="true">Khotwa Student Council</span>
      </a>

      <button id="menu-toggle" class="menu-toggle" type="button"
              aria-controls="primary-nav" aria-expanded="false" aria-label="ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
        <span data-lang="ar">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span><span data-lang="en" hidden aria-hidden="true">Menu</span>
      </button>

      <div class="nav-links" id="primary-nav" data-open="false" aria-hidden="true">
        <a href="/index.html"><span data-lang="ar">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span><span data-lang="en" hidden aria-hidden="true">Home</span></a>
        
        <!-- Mega Menu: Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ -->
        <div class="nav-item-mega" data-mega="programs">
          <button class="nav-link-mega" aria-expanded="false" aria-controls="mega-programs">
            <span data-lang="ar">Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬</span>
            <span data-lang="en" hidden aria-hidden="true">Programs</span>
            <svg viewBox="0 0 20 20" width="16" height="16" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
          </button>
          <div class="mega-menu" id="mega-programs" hidden>
            <div class="mega-menu-inner">
              <div class="mega-column">
                <h3 data-lang="ar">Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª</h3>
                <h3 data-lang="en" hidden aria-hidden="true">News & Events</h3>
                <a href="/news.html"><span data-lang="ar">ğŸ“° Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</span><span data-lang="en" hidden aria-hidden="true">ğŸ“° News</span></a>
                <a href="/events.html"><span data-lang="ar">ğŸ“… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª</span><span data-lang="en" hidden aria-hidden="true">ğŸ“… Events</span></a>
                <a href="/calendar.html"><span data-lang="ar">ğŸ—“ï¸ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</span><span data-lang="en" hidden aria-hidden="true">ğŸ—“ï¸ Calendar</span></a>
              </div>
              <div class="mega-column">
                <h3 data-lang="ar">Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨</h3>
                <h3 data-lang="en" hidden aria-hidden="true">Development & Training</h3>
                <a href="/courses.html"><span data-lang="ar">ğŸ“ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙˆØ±Ø´</span><span data-lang="en" hidden aria-hidden="true">ğŸ“ Courses & Workshops</span></a>
                <a href="/volunteers.html"><span data-lang="ar">â¤ï¸ Ø§Ù„ÙØ±Øµ Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ©</span><span data-lang="en" hidden aria-hidden="true">â¤ï¸ Volunteer Opportunities</span></a>
              </div>
            </div>
          </div>
        </div>

        <!-- Mega Menu: Ø¹Ù† Ø§Ù„Ù…Ø¬Ù„Ø³ -->
        <div class="nav-item-mega" data-mega="council">
          <button class="nav-link-mega" aria-expanded="false" aria-controls="mega-council">
            <span data-lang="ar">Ø¹Ù† Ø§Ù„Ù…Ø¬Ù„Ø³</span>
            <span data-lang="en" hidden aria-hidden="true">About Council</span>
            <svg viewBox="0 0 20 20" width="16" height="16" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
          </button>
          <div class="mega-menu" id="mega-council" hidden>
            <div class="mega-menu-inner">
              <div class="mega-column">
                <h3 data-lang="ar">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø§</h3>
                <h3 data-lang="en" hidden aria-hidden="true">About Us</h3>
                <a href="/about.html"><span data-lang="ar">ğŸ‘¥ Ù…Ù† Ù†Ø­Ù†</span><span data-lang="en" hidden aria-hidden="true">ğŸ‘¥ About Us</span></a>
                <a href="/gallery.html"><span data-lang="ar">ğŸ“¸ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</span><span data-lang="en" hidden aria-hidden="true">ğŸ“¸ Gallery</span></a>
                <a href="/faq.html"><span data-lang="ar">â“ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</span><span data-lang="en" hidden aria-hidden="true">â“ FAQ</span></a>
              </div>
            </div>
          </div>
        </div>

        <a href="/contact.html"><span data-lang="ar">Ø§ØªØµÙ„ Ø¨Ù†Ø§</span><span data-lang="en" hidden aria-hidden="true">Contact</span></a>
        
        <button class="lang-toggle" id="lang-toggle" type="button" aria-label="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©">
          <span data-lang="ar">English</span><span data-lang="en" hidden aria-hidden="true">Ø¹Ø±Ø¨ÙŠ</span>
        </button>
      </div>
    </div>
  </nav>

<main class="container" id="main">
    <!-- Header -->
    <section>
      <div class="section-head">
        <h1>
          <span data-lang="ar" lang="ar">Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</span>
          <span data-lang="en" lang="en" hidden aria-hidden="true">Upcoming Events</span>
        </h1>
      </div>
      <p class="muted" data-lang="ar">
        ØªØ§Ø¨Ø¹ Ø£Ø­Ø¯Ø« ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ£Ù†Ø´Ø·Ø© Ù…Ø¬Ù„Ø³ Ø·Ù„Ø§Ø¨ Ø®Ø·ÙˆØ©. Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù† ÙˆØ´Ø§Ø±Ùƒ Ù…Ø¹Ù†Ø§!
      </p>
      <p class="muted" data-lang="en" lang="en" hidden aria-hidden="true">
        Follow the latest events and activities of Khotwa Student Council. Register now and join us!
      </p>

      <!-- Search and Filters -->
      <div class="tools" style="display:flex;gap:.8rem;flex-wrap:wrap;margin-top:1.5rem;margin-bottom:1.5rem">
        <div class="search" role="search" style="display:flex;align-items:center;gap:.5rem;border:1px solid var(--ring);border-radius:12px;padding:.45rem .6rem;background:#fff;min-width:240px">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <circle cx="11" cy="11" r="7"/>
            <path d="m21 21-4.3-4.3"/>
          </svg>
          <input id="q" type="search" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øªâ€¦" aria-label="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª" style="border:0;outline:0;background:transparent;width:100%">
        </div>
        <button class="chip" data-filter="all" data-active="true" aria-pressed="true" style="border:1px solid var(--ring);padding:.45rem .9rem;border-radius:999px;background:#fff;cursor:pointer">
          <span data-lang="ar">Ø§Ù„ÙƒÙ„</span>
          <span data-lang="en" hidden aria-hidden="true">All</span>
        </button>
        <button class="chip" data-filter="social" aria-pressed="false" style="border:1px solid var(--ring);padding:.45rem .9rem;border-radius:999px;background:#fff;cursor:pointer">
          <span data-lang="ar">Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</span>
          <span data-lang="en" hidden aria-hidden="true">Social</span>
        </button>
        <button class="chip" data-filter="educational" aria-pressed="false" style="border:1px solid var(--ring);padding:.45rem .9rem;border-radius:999px;background:#fff;cursor:pointer">
          <span data-lang="ar">ØªØ¹Ù„ÙŠÙ…ÙŠ</span>
          <span data-lang="en" hidden aria-hidden="true">Educational</span>
        </button>
        <button class="chip" data-filter="cultural" aria-pressed="false" style="border:1px solid var(--ring);padding:.45rem .9rem;border-radius:999px;background:#fff;cursor:pointer">
          <span data-lang="ar">Ø«Ù‚Ø§ÙÙŠ</span>
          <span data-lang="en" hidden aria-hidden="true">Cultural</span>
        </button>
        <button class="chip" data-filter="sports" aria-pressed="false" style="border:1px solid var(--ring);padding:.45rem .9rem;border-radius:999px;background:#fff;cursor:pointer">
          <span data-lang="ar">Ø±ÙŠØ§Ø¶ÙŠ</span>
          <span data-lang="en" hidden aria-hidden="true">Sports</span>
        </button>
      </div>

      <!-- Events Grid -->
      <div class="grid grid-3" id="events">
        <!-- Skeleton Loaders -->
        <div class="skeleton">
          <div class="sk-img"></div>
          <div class="sk-body">
            <div class="sk-line w60"></div>
            <div class="sk-line w80"></div>
            <div class="sk-line w40"></div>
          </div>
        </div>
        <div class="skeleton">
          <div class="sk-img"></div>
          <div class="sk-body">
            <div class="sk-line w60"></div>
            <div class="sk-line w80"></div>
            <div class="sk-line w40"></div>
          </div>
        </div>
        <div class="skeleton">
          <div class="sk-img"></div>
          <div class="sk-body">
            <div class="sk-line w60"></div>
            <div class="sk-line w80"></div>
            <div class="sk-line w40"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer aria-label="ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹">
    <div class="container foot">
      <div class="muted">Â© <span id="year"></span> Khotwa Student Council</div>
      <a href="https://www.instagram.com/khotwa.sc/" target="_blank" rel="noopener noreferrer">Instagram</a>
    </div>
  </footer>

<script>
// Mega Menu functionality
document.addEventListener('DOMContentLoaded', function() {
  const megaItems = document.querySelectorAll('.nav-item-mega');
  
  megaItems.forEach(item => {
    const button = item.querySelector('.nav-link-mega');
    const menu = item.querySelector('.mega-menu');
    
    if (!button || !menu) return;
    
    // Desktop: hover
    item.addEventListener('mouseenter', () => {
      if (window.innerWidth > 980) {
        menu.hidden = false;
        button.setAttribute('aria-expanded', 'true');
      }
    });
    
    item.addEventListener('mouseleave', () => {
      if (window.innerWidth > 980) {
        menu.hidden = true;
        button.setAttribute('aria-expanded', 'false');
      }
    });
    
    // Mobile: click
    button.addEventListener('click', (e) => {
      if (window.innerWidth <= 980) {
        e.preventDefault();
        const isOpen = !menu.hidden;
        menu.hidden = isOpen;
        button.setAttribute('aria-expanded', !isOpen);
      }
    });
  });
  
  // Close all menus on resize
  window.addEventListener('resize', () => {
    document.querySelectorAll('.mega-menu').forEach(menu => {
      menu.hidden = true;
    });
    document.querySelectorAll('.nav-link-mega').forEach(btn => {
      btn.setAttribute('aria-expanded', 'false');
    });
  });
});
</script>

<script>
    (function(){
      // Ø³Ù†Ø© Ø§Ù„Ø­Ù‚ÙˆÙ‚
      const y = document.getElementById('year');
      if(y){ y.textContent = new Date().getFullYear(); }

      // Ù…Ù†ÙŠÙˆ Ø§Ù„Ø¬ÙˆØ§Ù„ + ÙˆØµÙˆÙ„ÙŠØ©
      const menuBtn = document.getElementById('menu-toggle');
      const primaryNav = document.getElementById('primary-nav');
      const mq = window.matchMedia('(min-width:901px)');

      if(menuBtn && primaryNav){
        function setMenu(open){
          primaryNav.setAttribute('data-open', String(open));
          menuBtn.setAttribute('aria-expanded', String(open));
          primaryNav.setAttribute('aria-hidden', String(!open && !mq.matches));
          if(open){
            (primaryNav.querySelector('a,button') || menuBtn).focus();
          }
        }
        function initMenu(){
          setMenu(false);
          primaryNav.setAttribute('aria-hidden', mq.matches ? 'false' : 'true');
        }
        initMenu();

        menuBtn.addEventListener('click', ()=>{
          setMenu(primaryNav.getAttribute('data-open')!=='true');
        });

        mq.addEventListener('change', e=>{
          setMenu(false);
          primaryNav.setAttribute('aria-hidden', e.matches ? 'false' : 'true');
        });

        document.addEventListener('click', e=>{
          const open = primaryNav.getAttribute('data-open')==='true';
          const t = e.target;
          if(!open) return;
          if(t instanceof Node && !primaryNav.contains(t) && !menuBtn.contains(t)){
            setMenu(false);
          }
        });

        document.addEventListener('keydown', e=>{
          if(e.key==='Escape') setMenu(false);
        });

        primaryNav.addEventListener('click', e=>{
          const link = (e.target instanceof Element) ? e.target.closest('a') : null;
          if(link) setMenu(false);
        });
      }

      // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
      const langBtn = document.getElementById('lang-toggle');

      function currentLang(){
        return localStorage.getItem('khotwa_lang') === 'en' ? 'en' : 'ar';
      }

      function setLang(lang){
        document.querySelectorAll('[data-lang]').forEach(el=>{
          const want = el.getAttribute('data-lang') === lang;
          el.hidden = !want;
          el.setAttribute('aria-hidden', String(!want));
        });

        document.documentElement.lang = (lang === 'ar') ? 'ar' : 'en';
        document.documentElement.dir  = (lang === 'ar') ? 'rtl' : 'ltr';

        if(langBtn){
          langBtn.textContent = (lang === 'ar') ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
          langBtn.setAttribute('aria-pressed', String(lang !== 'ar'));
        }

        // ØªØºÙŠÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
        document.title = (lang === 'ar') ? 'Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª â€“ Khotwa' : 'Events â€“ Khotwa';

        localStorage.setItem('khotwa_lang', lang);
      }

      setLang(currentLang());
      langBtn?.addEventListener('click', ()=>{
        setLang(currentLang() === 'ar' ? 'en' : 'ar');
      });
      
      // Search functionality
      const qInput = document.getElementById('q');
      let searchTimeout;
      qInput?.addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          currentQuery = e.target.value.trim();
          loadEvents();
        }, 500); // Debounce 500ms
      });
      
      // Filter buttons
      document.querySelectorAll('[data-filter]').forEach(btn => {
        btn.addEventListener('click', () => {
          // Update active state
          document.querySelectorAll('[data-filter]').forEach(b => {
            b.dataset.active = 'false';
            b.setAttribute('aria-pressed', 'false');
          });
          btn.dataset.active = 'true';
          btn.setAttribute('aria-pressed', 'true');
          
          // Update category and reload
          currentCategory = btn.dataset.filter;
          loadEvents();
        });
      });

      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ù…Ù† Backend API
      let currentQuery = '';
      let currentCategory = 'all';
      
      async function loadEvents(){
        const eventsEl = document.getElementById('events');
        try{
          // Use search API if there's a query or category filter
          let items;
          if (currentQuery || currentCategory !== 'all') {
            items = await KhotwaAPI.searchEvents({
              query: currentQuery,
              category: currentCategory === 'all' ? undefined : currentCategory,
              sortBy: 'newest'
            });
          } else {
            items = await KhotwaAPI.getEvents();
          }
          
          if (!items) {
            throw new Error('Failed to load events');
          }

          eventsEl.innerHTML = '';

          if(items.length === 0){
            eventsEl.innerHTML = '<div class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ¹Ø§Ù„ÙŠØ§Øª Ù‚Ø§Ø¯Ù…Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>';
            return;
          }

          // ÙÙ„ØªØ±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ÙÙ‚Ø· (Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…)
          const now = new Date();
          
          const upcomingEvents = items
            .map(ev => ({ ...ev, _date: new Date(ev.date || ev.eventDate) }))
            .filter(ev => !isNaN(ev._date) && ev._date > now)
            .sort((a,b) => a._date - b._date);

          if(upcomingEvents.length === 0){
            eventsEl.innerHTML = '<div class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ¹Ø§Ù„ÙŠØ§Øª Ù‚Ø§Ø¯Ù…Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>';
            return;
          }

          const frag = document.createDocumentFragment();

          upcomingEvents.forEach((event, idx)=>{
            const article = document.createElement('article');
            article.className = 'event-card';
            article.id = 'event-' + (idx + 1);
            article.style.cursor = 'pointer';
            article.style.transition = 'transform 0.2s ease, box-shadow 0.2s ease';

            const arDate = event._date
              ? event._date.toLocaleDateString('ar-EG',{year:'numeric',month:'long',day:'numeric'})
              : '';
            const enDate = event._date
              ? event._date.toLocaleDateString('en-AU',{year:'numeric',month:'long',day:'numeric'})
              : '';

            const langPref = localStorage.getItem('khotwa_lang') === 'en' ? 'en' : 'ar';
            const title = langPref === 'en' ? (event.titleEn || event.titleAr || '') : (event.titleAr || event.titleEn || '');
            const description = langPref === 'en' ? (event.descriptionEn || event.descriptionAr || '') : (event.descriptionAr || event.descriptionEn || '');
            const location = event.location || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';

            article.innerHTML = `
              ${event.imageUrl
                ? `<img src="${event.imageUrl}" alt="${title.replace(/"/g,'&quot;')}" loading="lazy" decoding="async" style="width:100%;height:auto;border-radius:8px">`
                : `<div style="aspect-ratio:16/9;background:#f3f4f6;border-radius:8px"></div>`}
              <div class="body">
                <div class="meta">
                  <span data-lang="ar">ğŸ“… ${arDate}</span>
                  <span data-lang="en" lang="en" hidden aria-hidden="true">ğŸ“… ${enDate}</span>
                  <span>â€¢</span>
                  <span data-lang="ar">ğŸ“ ${location}</span>
                  <span data-lang="en" lang="en" hidden aria-hidden="true">ğŸ“ ${location}</span>
                </div>
                <h3>${title}</h3>
                <p class="muted">${description.substring(0, 150)}${description.length > 150 ? '...' : ''}</p>
                <span style="color: #8b5cf6; font-weight: 600; font-size: 0.9rem;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ â†</span>
              </div>
            `;

            // Add click handler
            article.addEventListener('click', () => {
              window.location.href = `/event-detail.html?id=${event.id}`;
            });

            // Add hover effect
            article.addEventListener('mouseenter', () => {
              article.style.transform = 'translateY(-4px)';
              article.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.12)';
            });

            article.addEventListener('mouseleave', () => {
              article.style.transform = 'translateY(0)';
              article.style.boxShadow = '';
            });

            // fallback Ù„Ù„ØµÙˆØ±Ø©
            const img = article.querySelector('img');
            if(img){
              const FALLBACK = '/assets/apple-touch-icon.png';
              img.addEventListener('error', ()=>{
                const absoluteFallback = new URL(FALLBACK, location.origin).href;
                if(img.src !== absoluteFallback){
                  img.src = absoluteFallback;
                }
              }, { once:true });
            }

            frag.appendChild(article);
          });

          eventsEl.appendChild(frag);

          // Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¶Ø§ÙØ©
          (function syncLangAfterRender(){
            const lang = localStorage.getItem('khotwa_lang')==='en' ? 'en' : 'ar';
            document.querySelectorAll('[data-lang]').forEach(el=>{
              const want = el.getAttribute('data-lang')===lang;
              el.hidden = !want;
              el.setAttribute('aria-hidden', String(!want));
            });
          })();

        }catch(err){
          console.error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª:', err);
          eventsEl.innerHTML = '<div class="muted">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¢Ù†. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.</div>';
        }
      }

      loadEvents();
    })();
  </script>

  <!-- Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø© -->
  <link rel="stylesheet" href="/assets/features.css">
  <script src="/assets/features.js" defer></script>
  <script src="/assets/pagination.js"></script>
  <script src="/assets/advanced-filters.js"></script>
  <script src="/assets/newsletter.js"></script>
  <script src="/assets/form-validation.js"></script>
  <script src="/assets/comments-and-registration.js"></script>
  <script src="/assets/all-features.js"></script>
  <script src="/assets/feedback.js"></script>
  <script src="/assets/admin-button.js"></script>
  <script src="/assets/feedback-button.js"></script>
    <script src="js/config.js"></script>
    <script src="js/settings-loader.js"></script>
    <script src="/js/language-toggle.js"></script>
<script src="js/menu-toggle.js"></script>
  <script src="/assets/site-settings-loader.js"></script>
</body>
</html>
